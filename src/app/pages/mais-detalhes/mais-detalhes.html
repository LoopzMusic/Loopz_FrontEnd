
<div class="container mt-5">
  <div class="card p-3 mb-5">
    <a routerLink="" class="mb-3 d-inline-flex align-items-center text-body text-decoration-none">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
        class="bi bi-arrow-left-short me-1" viewBox="0 0 16 16">
        <path fill-rule="evenodd"
          d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5" />
      </svg>
      voltar para produtos
    </a>

    <div class="row g-4">
      <div class="col-md-5 justify-content-center">
        <img
          [src]="`http://localhost:8085/produto/${produto.cdProduto}/imagem`"
          [alt]="produto.nmProduto"
          class="produto-img img-fluid rounded shadow"
        />
      </div>

      <div class="col-md-7">
        <div class="card-body">
          <span class="produto-badge badge bg-light text-dark mb-2">
            {{ produto.dsCategoria }}
          </span>

          <h3 class="fw-bold">{{ produto.nmProduto }}</h3>

          <div class="produto-rating d-flex flex-column justify-content-start mb-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
              class="bi bi-star-fill estrela">
              <path
                d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
            </svg>
          </div>

          <p class="fw-semibold">Disponibilidade: {{ produto.qtdEstoqueProduto }}</p>

          <h3 class="fw-bold mb-4">R$ {{ produto.vlProduto }}</h3>

          <div class="d-flex gap-2 mb-3">
            <button class="btn btn-outline-secondary" (click)="diminuirQtd(qtd)">
              -
            </button>

            <input #qtd type="text" value="1" class="form-control text-center produto-qtd" />

            <button class="btn btn-outline-secondary" (click)="aumentarQtd(qtd)">
              +
            </button>

            <button class="btn btn-add" (click)="adicionarAoCarrinho(qtd)">
              <i class="bi bi-cart2 me-2"></i>
              Adicionar ao Carrinho
            </button>
          </div>

          <div class="d-flex gap-2">
            <button
              class="btn w-50"
              [class.btn-danger]="favorito"
              [class.btn-outline-secondary]="!favorito"
              (click)="adicionarFavorito()"
            >
              <i class="bi me-2" [class.bi-heart-fill]="favorito" [class.bi-heart]="!favorito"></i>
              {{ favorito ? 'Favoritado' : 'Favoritar' }}
            </button>

            <button class="btn btn-outline-secondary w-50">
              <i class="bi bi-share me-2"></i> Compartilhar
            </button>
          </div>

          <hr />

          <h5>Descrição</h5>
          <p class="text-muted">
            {{ produto.dsProduto }}
          </p>
        </div>
      </div>
    </div>
  </div>

  
  <div class="row mb-5">
    <div class="col-12">
      <h4 class="mb-4">Avaliações do Produto</h4>
      
      
      <div class="mb-4">
        <app-criar-feedback 
          [cdProduto]="produto.cdProduto"
          (feedbackCriado)="onFeedbackCriado()">
        </app-criar-feedback>
      </div>

      
      <div>
        <h5 class="mb-3">Avaliações de Clientes</h5>
        <app-card-avaliacao 
          #cardAvaliacaoRef
          [cdProduto]="produto.cdProduto">
        </app-card-avaliacao>
      </div>
    </div>
  </div>

  
  <h4>Produtos Relacionados:</h4>
  <div class="row g-3 mb-4">
    @for (produto of produtos.slice(0, 4); track produto.cdProduto) {
    <div class="col-lg-3 col-md-3 col-sm-6 col-6">
      <app-card [produto]="produto" class="card-menor h-100"></app-card>
    </div>
    }
  </div>
</div>


<div class="toast-container position-fixed bottom-0 end-0 p-3">
  <div #toastFavorito class="toast align-items-center text-bg-primary border-0" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="d-flex">
      <div class="toast-body">
        Mensagem aqui
      </div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
  </div>

  <div #toastCarrinho class="toast align-items-center text-bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="d-flex">
      <div class="toast-body">
        Mensagem aqui
      </div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
  </div>
</div>